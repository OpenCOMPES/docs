
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuration &#8212; SED 0.2.1.dev0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=19209950"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/config';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.0';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/OpenCOMPES/docs/main/sed/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.2.1.dev0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = true;
        </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="advanced_topics.html" />
    <link rel="prev" title="Installation" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.2.1.dev0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">SED 0.2.1.dev0 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../workflows/index.html">
    Workflows
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sed/api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../misc/contribution.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/OpenCOMPES/sed" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
          
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../workflows/index.html">
    Workflows
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sed/api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../misc/contribution.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/OpenCOMPES/sed" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>

</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Configuration</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item"><nav class="sidebar-indices-items" aria-labelledby="pst-indices-navigation-heading-2">
  <p id="pst-indices-navigation-heading-2" class="sidebar-indices-items__title" role="heading" aria-level="1">Indices</p>
  <ul class="indices-link">
        <li class="toctree-l1">
          <a class="reference internal"
             href="../genindex.html"
             accesskey="I">General Index</a>
        </li>
        <li class="toctree-l1">
          <a class="reference internal" href="../py-modindex.html">Python Module Index</a>
        </li>
  </ul>
</nav></div>
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Configuration</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">#</a></h1>
<p>The config module contains a mechanism to collect configuration parameters from various sources and configuration files, and to combine them in a hierarchical manner into a single, consistent configuration dictionary.
It will load an (optional) provided config file, or alternatively use a passed python dictionary as initial config dictionary, and subsequently look for the following additional config files to load:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">folder_config</span></code>: A config file of name :file:<code class="docutils literal notranslate"><span class="pre">sed_config.yaml</span></code> in the current working directory. This is mostly intended to pass calibration parameters of the workflow between different notebook instances.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_config</span></code>: A config file provided by the user, stored as :file:<code class="docutils literal notranslate"><span class="pre">.sed/config.yaml</span></code> in the current user’s home directly. This is intended to give a user the option for individual configuration modifications of system settings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_config</span></code>: A config file provided by the system administrator, stored as :file:<code class="docutils literal notranslate"><span class="pre">/etc/sed/config.yaml</span></code> on Linux-based systems, and :file:<code class="docutils literal notranslate"><span class="pre">%ALLUSERSPROFILE%/sed/config.yaml</span></code> on Windows. This should provide all necessary default parameters for using the sed processor with a given setup. For an example for an mpes setup, see :ref:<code class="docutils literal notranslate"><span class="pre">example_config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_config</span></code>: The default configuration shipped with the package. Typically, all parameters here should be overwritten by any of the other configuration files.</p></li>
</ul>
<p>The config mechanism returns the combined dictionary, and reports the loaded configuration files. In order to disable or overwrite any of the configuration files, they can be also given as optional parameters (path to a file, or python dictionary).</p>
<section id="default-configuration-settings">
<h2>Default configuration settings<a class="headerlink" href="#default-configuration-settings" title="Permalink to this heading">#</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">core</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># The loader to use. The generic loader allows for loading various files types directly using dask.</span>
<span class="w">  </span><span class="nt">loader</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generic</span>

<span class="nt">dataframe</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># dataframe column containing x coordinates</span>
<span class="w">  </span><span class="nt">x_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing y coordinates</span>
<span class="w">  </span><span class="nt">y_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Y&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing time-of-flight data</span>
<span class="w">  </span><span class="nt">tof_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;t&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing time-of-flight data in nanoseconds</span>
<span class="w">  </span><span class="nt">tof_ns_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;t_ns&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing analog-to-digital data</span>
<span class="w">  </span><span class="nt">adc_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADC&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing bias voltage data</span>
<span class="w">  </span><span class="nt">bias_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sampleBias&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected x coordinates</span>
<span class="w">  </span><span class="nt">corrected_x_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xm&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected y coordinates</span>
<span class="w">  </span><span class="nt">corrected_y_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ym&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected time-of-flight data</span>
<span class="w">  </span><span class="nt">corrected_tof_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tm&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing kx coordinates</span>
<span class="w">  </span><span class="nt">kx_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kx&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing ky coordinates</span>
<span class="w">  </span><span class="nt">ky_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ky&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing energy data</span>
<span class="w">  </span><span class="nt">energy_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;energy&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing delay data</span>
<span class="w">  </span><span class="nt">delay_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delay&quot;</span>
<span class="w">  </span><span class="c1"># time length of a base time-of-flight bin in s</span>
<span class="w">  </span><span class="nt">tof_binwidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.125e-12</span>
<span class="w">  </span><span class="c1"># Binning factor of the tof_column-data compared to tof_binwidth (2^(tof_binning-1))</span>
<span class="w">  </span><span class="nt">tof_binning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="c1"># binning factor used for the adc coordinate (2^(adc_binning-1))</span>
<span class="w">  </span><span class="nt">adc_binning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="c1"># list of columns to apply jitter to.</span>
<span class="w">  </span><span class="nt">jitter_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;@x_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@y_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@tof_column&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Jitter amplitude or list of jitter amplitudes. Should equal half the digital step size of each jitter_column</span>
<span class="w">  </span><span class="nt">jitter_amps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">  </span><span class="c1"># Time stepping in seconds of the successive events in the timed dataframe</span>
<span class="w">  </span><span class="nt">timed_dataframe_unit_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>

<span class="nt">energy</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Number of bins to use for energy calibration traces</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="c1"># Bin ranges to use for energy calibration curves (for tof_binning=0)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100000</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">150000</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Option to normalize energy calibration traces</span>
<span class="w">  </span><span class="nt">normalize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="c1"># Pixel range for smoothing</span>
<span class="w">  </span><span class="nt">normalize_span</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="c1"># Spline order for smoothing</span>
<span class="w">  </span><span class="nt">normalize_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="c1"># Radius parameter for fastdtw algorithm to find path correspondence</span>
<span class="w">  </span><span class="nt">fastdtw_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="c1"># Window around a peak to make sure that no other peaks are present</span>
<span class="w">  </span><span class="nt">peak_window</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="c1"># Method to use for energy calibration</span>
<span class="w">  </span><span class="nt">calibration_method</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lmfit&quot;</span>
<span class="w">  </span><span class="c1"># Energy scale to use for energy calibration</span>
<span class="w">  </span><span class="nt">energy_scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kinetic&quot;</span>
<span class="w">  </span><span class="c1"># Approximate position of the high-energy-cutoff in tof_column bins,</span>
<span class="w">  </span><span class="c1"># used for displaying a graph to choose the energy correction function parameters.</span>
<span class="w">  </span><span class="nt">tof_fermi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">132250</span>
<span class="w">  </span><span class="c1"># TOF range to visualize for the correction tool around tof_fermi</span>
<span class="w">  </span><span class="nt">tof_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-600</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># x-integration range for the correction tool around the center pixel</span>
<span class="w">  </span><span class="nt">x_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># y-integration range for the correction tool around the center pixel</span>
<span class="w">  </span><span class="nt">y_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># High intensity cutoff for the visualization tool</span>
<span class="w">  </span><span class="nt">color_clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>


<span class="nt">momentum</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># binning axes to use for momentum correction/calibration.</span>
<span class="w">  </span><span class="c1"># Axes names starting with &quot;@&quot; refer to keys in the &quot;dataframe&quot; section</span>
<span class="w">  </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;@x_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@y_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@tof_column&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Bin numbers used for the respective axes</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">512</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">512</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">300</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># bin ranges to use (in unbinned detector coordinates)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1792</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1792</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">132000</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">138000</span><span class="p p-Indicator">]]</span>
<span class="w">  </span><span class="c1"># The x/y pixel ranges of the detector</span>
<span class="w">  </span><span class="nt">detector_ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2048</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2048</span><span class="p p-Indicator">]]</span>
<span class="w">  </span><span class="c1"># The center pixel of the detector in the binned x/y coordinates</span>
<span class="w">  </span><span class="nt">center_pixel</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">256</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Sigma parameter for feature selection (intensity above background)</span>
<span class="w">  </span><span class="nt">sigma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="c1"># FWHM parameter for feature selection (width of features to extract)</span>
<span class="w">  </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">  </span><span class="c1"># Sigma_radius parameter for feature selection (variation of radius size)</span>
<span class="w">  </span><span class="nt">sigma_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="nt">delay</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># value ranges of the analog-to-digital converter axes used for encoding the delay stage position</span>
<span class="w">  </span><span class="c1"># (in unbinned coordinates)</span>
<span class="w">  </span><span class="nt">adc_range</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1900</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">25600</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># pump probe time overlap in ps</span>
<span class="w">  </span><span class="nt">time0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="c1"># if to flip the time axis</span>
<span class="w">  </span><span class="nt">flip_time_axis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="nt">binning</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Histogram computation mode to use.</span>
<span class="w">  </span><span class="nt">hist_mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;numba&quot;</span>
<span class="w">  </span><span class="c1"># Mode for histogram recombination to use</span>
<span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fast</span>
<span class="w">  </span><span class="c1"># Whether to display a progress bar</span>
<span class="w">  </span><span class="nt">pbar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="c1"># Number of multithreading threads per worker thread</span>
<span class="w">  </span><span class="nt">threads_per_worker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">  </span><span class="c1"># API for numpy multithreading</span>
<span class="w">  </span><span class="nt">threadpool_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;blas&quot;</span>

<span class="nt">histogram</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># number of bins used for histogram visualization</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">80</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># default axes to use for histogram visualization.</span>
<span class="w">  </span><span class="c1"># Axes names starting with &quot;@&quot; refer to keys in the &quot;dataframe&quot; section</span>
<span class="w">  </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;@x_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@y_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@tof_column&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># default ranges to use for histogram visualization (in unbinned detector coordinates)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1800</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1800</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">150000</span><span class="p p-Indicator">]]</span>
</pre></div>
</div>
</section>
<section id="example-configuration-file-for-mpes-metis-momentum-microscope-at-fhi-berlin">
<h2>Example configuration file for mpes (METIS momentum microscope at FHI-Berlin)<a class="headerlink" href="#example-configuration-file-for-mpes-metis-momentum-microscope-at-fhi-berlin" title="Permalink to this heading">#</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">core</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># The loader to use. The mpes loader allows for loading hdf5 files from the METIS momentum microscope.</span>
<span class="w">  </span><span class="nt">loader</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mpes</span>
<span class="w">  </span><span class="c1"># Option to use the copy tool to mirror data to a local storage location before processing.</span>
<span class="w">  </span><span class="nt">use_copy_tool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">  </span><span class="c1"># path to the root of the source data directory</span>
<span class="w">  </span><span class="nt">copy_tool_source</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/data/&quot;</span>
<span class="w">  </span><span class="c1"># path to the root or the local data storage</span>
<span class="w">  </span><span class="nt">copy_tool_dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/localDataStore/&quot;</span>
<span class="w">  </span><span class="c1"># optional keywords for the copy tool:</span>
<span class="w">  </span><span class="nt">copy_tool_kwds</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># number of parallel copy jobs</span>
<span class="w">    </span><span class="nt">ntasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">    </span><span class="c1"># group id to set for copied files and folders</span>
<span class="w">    </span><span class="nt">gid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1001</span>

<span class="nt">dataframe</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># hdf5 group names to read from the h5 files (for mpes reader)</span>
<span class="w">  </span><span class="nt">hdf5_groupnames</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Stream_0&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Stream_1&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Stream_2&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Stream_4&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># aliases to assign to the dataframe columns for the corresponding hdf5 streams</span>
<span class="w">  </span><span class="nt">hdf5_aliases</span><span class="p">:</span>
<span class="w">    </span><span class="nt">Stream_0</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X&quot;</span>
<span class="w">    </span><span class="nt">Stream_1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Y&quot;</span>
<span class="w">    </span><span class="nt">Stream_2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;t&quot;</span>
<span class="w">    </span><span class="nt">Stream_4</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADC&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column name for the time stamp column</span>
<span class="w">  </span><span class="nt">time_stamp_alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;timeStamps&quot;</span>
<span class="w">  </span><span class="c1"># hdf5 group name containing eventIDs occurring at every millisecond (used to calculate timestamps)</span>
<span class="w">  </span><span class="nt">ms_markers_group</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;msMarkers&quot;</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the timestamp of the first event in a file</span>
<span class="w">  </span><span class="nt">first_event_time_stamp_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FirstEventTimeStamp&quot;</span>
<span class="w">  </span><span class="c1"># Time stepping in seconds of the successive events in the timed dataframe</span>
<span class="w">  </span><span class="nt">timed_dataframe_unit_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="w">  </span><span class="c1"># list of columns to apply jitter to</span>
<span class="w">  </span><span class="nt">jitter_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;X&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;ADC&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># dataframe column containing x coordinates</span>
<span class="w">  </span><span class="nt">x_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing y coordinates</span>
<span class="w">  </span><span class="nt">y_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Y&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing time-of-flight data</span>
<span class="w">  </span><span class="nt">tof_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;t&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing analog-to-digital data</span>
<span class="w">  </span><span class="nt">adc_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ADC&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected x coordinates</span>
<span class="w">  </span><span class="nt">corrected_x_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xm&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected y coordinates</span>
<span class="w">  </span><span class="nt">corrected_y_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ym&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected time-of-flight data</span>
<span class="w">  </span><span class="nt">corrected_tof_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tm&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing kx coordinates</span>
<span class="w">  </span><span class="nt">kx_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kx&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing ky coordinates</span>
<span class="w">  </span><span class="nt">ky_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ky&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing energy data</span>
<span class="w">  </span><span class="nt">energy_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;energy&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing delay data</span>
<span class="w">  </span><span class="nt">delay_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;delay&quot;</span>
<span class="w">  </span><span class="c1"># time length of a base time-of-flight bin in ns</span>
<span class="w">  </span><span class="nt">tof_binwidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.125e-12</span>
<span class="w">  </span><span class="c1"># Binning factor of the tof_column-data compared to tof_binwidth (2^(tof_binning-1))</span>
<span class="w">  </span><span class="nt">tof_binning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="c1"># binning factor used for the adc coordinate (2^(adc_binning-1))</span>
<span class="w">  </span><span class="nt">adc_binning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="c1"># Default units for dataframe entries</span>
<span class="w">  </span><span class="nt">units</span><span class="p">:</span>
<span class="w">    </span><span class="nt">X</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">Y</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">t</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">tof_voltage</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;V&#39;</span>
<span class="w">    </span><span class="nt">extractor_voltage</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;V&#39;</span>
<span class="w">    </span><span class="nt">extractor_current</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;A&#39;</span>
<span class="w">    </span><span class="nt">cryo_temperature</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;K&#39;</span>
<span class="w">    </span><span class="nt">sample_temperature</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;K&#39;</span>
<span class="w">    </span><span class="nt">dld_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ns&#39;</span>
<span class="w">    </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ps&#39;</span>
<span class="w">    </span><span class="nt">timeStamp</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;s&#39;</span>
<span class="w">    </span><span class="nt">energy</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;eV&#39;</span>
<span class="w">    </span><span class="nt">E</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;eV&#39;</span>
<span class="w">    </span><span class="nt">kx</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1/A&#39;</span>
<span class="w">    </span><span class="nt">ky</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1/A&#39;</span>

<span class="nt">energy</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Number of bins to use for energy calibration traces</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="c1"># Bin ranges to use for energy calibration curves (for tof_binning=0)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">128000</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">138000</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># hdf5 path to attribute storing bias information for a given file</span>
<span class="w">  </span><span class="nt">bias_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@KTOF:Lens:Sample:V&quot;</span>
<span class="w">  </span><span class="c1"># Option to normalize energy calibration traces</span>
<span class="w">  </span><span class="nt">normalize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="c1"># Pixel range for smoothing</span>
<span class="w">  </span><span class="nt">normalize_span</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="c1"># Spline order for smoothing</span>
<span class="w">  </span><span class="nt">normalize_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="c1"># Radius parameter for fastdtw algorithm to find path correspondence</span>
<span class="w">  </span><span class="nt">fastdtw_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="c1"># Window around a peak to make sure that no other peaks are present</span>
<span class="w">  </span><span class="nt">peak_window</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span><span class="c1"># Method to use for energy calibration</span>
<span class="w">  </span><span class="nt">calibration_method</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lmfit&quot;</span>
<span class="w">  </span><span class="c1"># Energy scale to use for energy calibration</span>
<span class="w">  </span><span class="nt">energy_scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kinetic&quot;</span>
<span class="w">  </span><span class="c1"># Approximate position of the high-energy-cutoff in tof_column bins,</span>
<span class="w">  </span><span class="c1"># used for displaying a graph to choose the energy correction function parameters.</span>
<span class="w">  </span><span class="nt">tof_fermi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">132250</span>
<span class="w">  </span><span class="c1"># TOF range to visualize for the correction tool around tof_fermi</span>
<span class="w">  </span><span class="nt">tof_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-600</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># x-integration range for the correction tool around the center pixel</span>
<span class="w">  </span><span class="nt">x_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># y-integration range for the correction tool around the center pixel</span>
<span class="w">  </span><span class="nt">y_width</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">20</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># High intensity cutoff for the visualization tool</span>
<span class="w">  </span><span class="nt">color_clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">  </span><span class="nt">correction</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Correction type</span>
<span class="w">    </span><span class="nt">correction_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Lorentzian&quot;</span>
<span class="w">    </span><span class="c1"># Correction amplitude</span>
<span class="w">    </span><span class="nt">amplitude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.5</span>
<span class="w">    </span><span class="c1"># center coordinates for the correction (in detector coordinates)</span>
<span class="w">    </span><span class="nt">center</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">730.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">730.0</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="c1"># gamma value for the Lorentzian correction (same for x and y)</span>
<span class="w">    </span><span class="nt">gamma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">920.0</span>
<span class="w">    </span><span class="c1"># sigma value for the gaussian correction (same for x and y)</span>
<span class="w">    </span><span class="nt">sigma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">700.0</span>
<span class="w">    </span><span class="c1"># diameter value for the radial correction (same for x and y)</span>
<span class="w">    </span><span class="nt">diameter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3000.0</span>
<span class="w">  </span><span class="c1"># Default energy calibration</span>
<span class="w">  </span><span class="nt">calibration</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># time-of-flight distance (in m)</span>
<span class="w">    </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.058206295066418</span>
<span class="w">    </span><span class="c1"># time offset (in ns)</span>
<span class="w">    </span><span class="nt">t0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7.684410678887588e-07</span>
<span class="w">    </span><span class="c1"># energy offset (in eV)</span>
<span class="w">    </span><span class="nt">E0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-30.440035779171833</span>
<span class="w">    </span><span class="c1"># energy scale of calibration</span>
<span class="w">    </span><span class="nt">energy_scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kinetic&quot;</span>

<span class="nt">momentum</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># binning axes to use for momentum correction/calibration.</span>
<span class="w">  </span><span class="c1"># Axes names starting with &quot;@&quot; refer to keys in the &quot;dataframe&quot; section</span>
<span class="w">  </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;@x_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@y_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@tof_column&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Bin numbers used for the respective axes</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">512</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">512</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">300</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># bin ranges to use (in unbinned detector coordinates)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1792</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1792</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">132000</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">136000</span><span class="p p-Indicator">]]</span>
<span class="w">  </span><span class="c1"># The x/y pixel ranges of the detector</span>
<span class="w">  </span><span class="nt">detector_ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2048</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2048</span><span class="p p-Indicator">]]</span>
<span class="w">  </span><span class="c1"># The center pixel of the detector in the binned x/y coordinates</span>
<span class="w">  </span><span class="nt">center_pixel</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">256</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">256</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Sigma parameter for feature selection (intensity above background)</span>
<span class="w">  </span><span class="nt">sigma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="c1"># FWHM parameter for feature selection (width of features to extract)</span>
<span class="w">  </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">  </span><span class="c1"># Sigma_radius parameter for feature selection (variation of radius size)</span>
<span class="w">  </span><span class="nt">sigma_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="c1"># default momentum calibration</span>
<span class="w">  </span><span class="nt">calibration</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># x momentum scaling factor</span>
<span class="w">    </span><span class="nt">kx_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.010729535670610963</span>
<span class="w">    </span><span class="c1"># y momentum scaling factor</span>
<span class="w">    </span><span class="nt">ky_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.010729535670610963</span>
<span class="w">    </span><span class="c1"># x BZ center pixel</span>
<span class="w">    </span><span class="nt">x_center</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">256.0</span>
<span class="w">    </span><span class="c1"># y BZ center pixel</span>
<span class="w">    </span><span class="nt">y_center</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">256.0</span>
<span class="w">    </span><span class="c1"># x start value of the calibration dataset</span>
<span class="w">    </span><span class="nt">rstart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-256.</span>
<span class="w">    </span><span class="c1"># y start value of the calibration dataset</span>
<span class="w">    </span><span class="nt">cstart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-256.</span>
<span class="w">    </span><span class="c1"># x direction pixel stepping of the calibration dataset</span>
<span class="w">    </span><span class="nt">rstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">    </span><span class="c1"># y direction pixel stepping of the calibration dataset</span>
<span class="w">    </span><span class="nt">cstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">  </span><span class="nt">correction</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># default feature points used for calculating the distortion correction.</span>
<span class="w">    </span><span class="nt">feature_points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">203.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">341.96</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">299.16</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">345.32</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">350.25</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">243.70</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">304.38</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">149.88</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">199.52</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">152.48</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">154.28</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">242.27</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">248.29</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">248.62</span><span class="p p-Indicator">]]</span>
<span class="w">    </span><span class="c1"># rotational symmetry of the structure used for correction. Should be an even number</span>
<span class="w">    </span><span class="nt">rotation_symmetry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<span class="w">    </span><span class="c1"># Option whether the center of the structure is included in the feature points.</span>
<span class="w">    </span><span class="nt">include_center</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="c1"># Option whether the center should be included in the correction algorithm</span>
<span class="w">    </span><span class="nt">use_center</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="nt">delay</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># value ranges of the analog-to-digital converter axes used for encoding the delay stage position</span>
<span class="w">  </span><span class="c1"># (in unbinned coordinates)</span>
<span class="w">  </span><span class="nt">adc_range</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1900</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">25600</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the starting point of the delay stage</span>
<span class="w">  </span><span class="nt">p1_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@trARPES:DelayStage:p1&quot;</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the end point of the delay stage</span>
<span class="w">  </span><span class="nt">p2_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@trARPES:DelayStage:p2&quot;</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the t0 value of the delay stage</span>
<span class="w">  </span><span class="nt">t0_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@trARPES:DelayStage:t0&quot;</span>

<span class="nt">binning</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Histogram computation mode to use.</span>
<span class="w">  </span><span class="nt">hist_mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;numba&quot;</span>
<span class="w">  </span><span class="c1"># Mode for histogram recombination to use</span>
<span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;fast&quot;</span>
<span class="w">  </span><span class="c1"># Whether to display a progress bar</span>
<span class="w">  </span><span class="nt">pbar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="c1"># Number of parallel binning threads to use</span>
<span class="w">  </span><span class="nt">num_cores</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">  </span><span class="c1"># Number of multithreading threads per worker thread</span>
<span class="w">  </span><span class="nt">threads_per_worker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">  </span><span class="c1"># API for numpy multithreading</span>
<span class="w">  </span><span class="nt">threadpool_API</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;blas&quot;</span>

<span class="nt">histogram</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># number of bins used for histogram visualization</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">80</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">80</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># default axes to use for histogram visualization.</span>
<span class="w">  </span><span class="c1"># Axes names starting with &quot;@&quot; refer to keys in the &quot;dataframe&quot; section</span>
<span class="w">  </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;@x_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@y_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@tof_column&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;@adc_column&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># default ranges to use for histogram visualization (in unbinned detector coordinates)</span>
<span class="w">  </span><span class="nt">ranges</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1800</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1800</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">128000</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">138000</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">32000</span><span class="p p-Indicator">]]</span>

<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># URL of the epics archiver request engine</span>
<span class="w">  </span><span class="nt">archiver_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://aa0.fhi-berlin.mpg.de:17668/retrieval/data/getData.json?pv=&quot;</span>
<span class="w">  </span><span class="c1"># EPICS channels to collect from EPICS archiver</span>
<span class="w">  </span><span class="nt">epics_pvs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;KTOF:Lens:Extr:I&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:TEMP_RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:XGS600:PressureAC:P_RD&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KTOF:Lens:UDLD:V&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KTOF:Lens:Sample:V&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KTOF:Apertures:m1.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KTOF:Apertures:m2.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;KTOF:Apertures:m3.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:TRX.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:TRY.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:TRZ.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:THT.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:PHI.RBV&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;trARPES:Carving:OMG.RBV&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the field aperture &quot;in&quot; motor position</span>
<span class="w">  </span><span class="nt">fa_in_channel</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;KTOF:Apertures:m1.RBV&#39;</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the field aperture &quot;hor&quot; motor position</span>
<span class="w">  </span><span class="nt">fa_hor_channel</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;KTOF:Apertures:m2.RBV&#39;</span>
<span class="w">  </span><span class="c1"># hdf5 attribute containing the contrast aperture &quot;in&quot; motor position</span>
<span class="w">  </span><span class="nt">ca_in_channel</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;KTOF:Apertures:m3.RBV&#39;</span>
<span class="w">  </span><span class="c1"># dictionary containing contrast and field aperture motor positions and sizes</span>
<span class="w">  </span><span class="nt">aperture_config</span><span class="p">:</span>
<span class="w">    </span><span class="s">&quot;2018-01-23T19:35:15&quot;</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">fa_size</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;750&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-3.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-1.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-5.4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.6</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-3.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-1.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;1500&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-3.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-1.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">6.25</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">7.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">3.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-5.4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.6</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;500&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">3.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;1000&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">3.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">4.4</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">6.25</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">7.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;20&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">9.6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10.1</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-5.4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.6</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;50&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">9.6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10.1</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;100&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">9.6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10.1</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">6.25</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">7.75</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="nt">open</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-9.0</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-8.9</span><span class="p p-Indicator">]]</span>
<span class="w">      </span><span class="nt">ca_size</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;50&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">8.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8.4</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-0.9</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="s">&#39;100&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3.4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3.8</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-5.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-5.9</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">open</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-12.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-8</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="s">&quot;2020-01-23T19:35:15&quot;</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">fa_size</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;750&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-6.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.8</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-6.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.8</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-0.7</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-0.3</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;500&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-6.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-4.8</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-7.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-0.7</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-0.3</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;100&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-7.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;300&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;10&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">6.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-7.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;20&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">6.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-0.7</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-0.3</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="s">&#39;50&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">6.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.9</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6.0</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="nt">open</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">-15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-8.5</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-8.9</span><span class="p p-Indicator">]]</span>
<span class="w">      </span><span class="nt">ca_size</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;50&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">11.0</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="s">&#39;300&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.7</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.5</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="s">&#39;100&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5.9</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-5.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-5.2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">open</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-8.5</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># dictionary containing lens mode configurations</span>
<span class="w">  </span><span class="nt">lens_mode_config</span><span class="p">:</span>
<span class="w">    </span><span class="s">&quot;6kV_kmodem4.0_20VTOF_v3.sav&quot;</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">Extr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000.0</span>
<span class="w">      </span><span class="nt">UCA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1200</span>
<span class="w">      </span><span class="nt">UFA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600.0</span>
<span class="w">      </span><span class="nt">Z1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2452.9</span>
<span class="w">      </span><span class="nt">Z2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1489.9</span>
<span class="w">      </span><span class="nt">A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">420.07</span>
<span class="w">      </span><span class="nt">B</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2494.8</span>
<span class="w">      </span><span class="nt">C</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">489.2</span>
<span class="w">      </span><span class="nt">D</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">228.05</span>
<span class="w">      </span><span class="nt">E</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">113.82</span>
<span class="w">      </span><span class="nt">F</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">54.232</span>
<span class="w">      </span><span class="nt">G</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">      </span><span class="nt">H</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.5</span>
<span class="w">      </span><span class="nt">I</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">36.0</span>
<span class="w">      </span><span class="nt">TOF</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">      </span><span class="nt">MCPfront</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">    </span><span class="s">&quot;6kV_kmodem4.0_30VTOF_453ns_focus.sav&quot;</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">Extr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6000.0</span>
<span class="w">      </span><span class="nt">UCA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1200</span>
<span class="w">      </span><span class="nt">UFA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600.0</span>
<span class="w">      </span><span class="nt">Z1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2452.9</span>
<span class="w">      </span><span class="nt">Z2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1489.9</span>
<span class="w">      </span><span class="nt">A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">403.07</span>
<span class="w">      </span><span class="nt">B</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2500</span>
<span class="w">      </span><span class="nt">C</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">422.25</span>
<span class="w">      </span><span class="nt">D</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">208.88</span>
<span class="w">      </span><span class="nt">E</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">199.49</span>
<span class="w">      </span><span class="nt">F</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">68.735</span>
<span class="w">      </span><span class="nt">G</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">      </span><span class="nt">H</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">      </span><span class="nt">I</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">44.5</span>
<span class="w">      </span><span class="nt">TOF</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">      </span><span class="nt">MCPfront</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>

<span class="nt">nexus</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># pynxtools reader to use for saving NXmpes files</span>
<span class="w">  </span><span class="nt">reader</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mpes&quot;</span>
<span class="w">  </span><span class="c1"># NeXus application definition to use for saving</span>
<span class="w">  </span><span class="nt">definition</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NXmpes&quot;</span>
<span class="w">  </span><span class="c1"># List containing additional input files to be handed to the pynxtools converter tool,</span>
<span class="w">  </span><span class="c1"># e.g. containing a configuration file, and additional metadata.</span>
<span class="w">  </span><span class="nt">input_files</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;../sed/config/NXmpes_config.json&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="example-configuration-file-for-flash-hextof-momentum-microscope-at-flash-desy">
<h2>Example configuration file for flash (HEXTOF momentum microscope at FLASH, Desy)<a class="headerlink" href="#example-configuration-file-for-flash-hextof-momentum-microscope-at-flash-desy" title="Permalink to this heading">#</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This file contains the default configuration for the flash loader.</span>

<span class="nt">core</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># defines the loader</span>
<span class="w">  </span><span class="nt">loader</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flash</span>
<span class="w">  </span><span class="c1"># the beamline where experiment took place</span>
<span class="w">  </span><span class="nt">beamline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pg2</span>
<span class="w">  </span><span class="c1"># the ID number of the beamtime</span>
<span class="w">  </span><span class="nt">beamtime_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11019101</span>
<span class="w">  </span><span class="c1"># the year of the beamtime</span>
<span class="w">  </span><span class="nt">year</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2023</span>

<span class="w">  </span><span class="c1"># The paths to the raw and parquet data directories. If these are not</span>
<span class="w">  </span><span class="c1"># provided, the loader will try to find the data based on year beamtimeID etc</span>
<span class="w">  </span><span class="nt">paths</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># location of the raw data.</span>
<span class="w">    </span><span class="nt">data_raw_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="c1"># location of the intermediate parquet files.</span>
<span class="w">    </span><span class="nt">data_parquet_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="nt">binning</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Since this will run on maxwell most probably, we have a lot of cores at our disposal</span>
<span class="w">  </span><span class="nt">num_cores</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="nt">dataframe</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># The name of the DAQ system to use. Necessary to resolve the filenames/paths.</span>
<span class="w">  </span><span class="nt">daq</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fl1user3</span>
<span class="w">  </span><span class="c1"># The offset correction to the pulseId</span>
<span class="w">  </span><span class="nt">ubid_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">  </span><span class="c1"># the number of iterations to fill the pulseId forward.</span>
<span class="w">  </span><span class="nt">forward_fill_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="c1"># if true, removes the 3 bits reserved for dldSectorID from the dldTimeSteps column</span>
<span class="w">  </span><span class="nt">split_sector_id_from_dld_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="c1"># bits reserved for dldSectorID in the dldTimeSteps column</span>
<span class="w">  </span><span class="nt">sector_id_reserved_bits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="c1"># dataframe column containing x coordinates</span>
<span class="w">  </span><span class="nt">x_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dldPosX</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected x coordinates</span>
<span class="w">  </span><span class="nt">corrected_x_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing kx coordinates</span>
<span class="w">  </span><span class="nt">kx_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kx&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing y coordinates</span>
<span class="w">  </span><span class="nt">y_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dldPosY</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected y coordinates</span>
<span class="w">  </span><span class="nt">corrected_y_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Y&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing kx coordinates</span>
<span class="w">  </span><span class="nt">ky_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ky&quot;</span>
<span class="w">  </span><span class="c1"># dataframe column containing time-of-flight data</span>
<span class="w">  </span><span class="nt">tof_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dldTimeSteps</span>
<span class="w">  </span><span class="c1"># dataframe column containing time-of-flight data in ns</span>
<span class="w">  </span><span class="nt">tof_ns_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dldTime</span>
<span class="w">  </span><span class="c1"># dataframe column containing corrected time-of-flight data</span>
<span class="w">  </span><span class="nt">corrected_tof_column</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tm&quot;</span>
<span class="w">  </span><span class="c1"># time length of a base time-of-flight bin in seconds</span>
<span class="w">  </span><span class="nt">tof_binwidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0576131995767355E-11</span>
<span class="w">  </span><span class="c1"># binning parameter for time-of-flight data. 2**tof_binning bins per base bin</span>
<span class="w">  </span><span class="nt">tof_binning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">  </span><span class="c1"># power of 2, 3 means 8 bins per step</span>
<span class="w">  </span><span class="c1"># dataframe column containing sector ID. obtained from dldTimeSteps column</span>
<span class="w">  </span><span class="nt">sector_id_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dldSectorID</span>

<span class="w">  </span><span class="nt">sector_delays</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># the delay stage column</span>
<span class="w">  </span><span class="nt">delay_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delayStage</span>
<span class="w">  </span><span class="c1"># the corrected pump-probe time axis</span>
<span class="w">  </span><span class="nt">corrected_delay_column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pumpProbeTime</span>
<span class="w">  </span><span class="nt">jitter_cols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;dldPosX&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;dldPosY&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;dldTimeSteps&quot;</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">units</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># These are the units of the columns</span>
<span class="w">    </span><span class="nt">dldPosX</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">dldPosY</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">dldTimeSteps</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;step&#39;</span>
<span class="w">    </span><span class="nt">tof_voltage</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;V&#39;</span>
<span class="w">    </span><span class="nt">extractorVoltage</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;V&#39;</span>
<span class="w">    </span><span class="nt">extractorCurrent</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;A&#39;</span>
<span class="w">    </span><span class="nt">cryoTemperature</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;K&#39;</span>
<span class="w">    </span><span class="nt">sampleTemperature</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;K&#39;</span>
<span class="w">    </span><span class="nt">dldTime</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ns&#39;</span>
<span class="w">    </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ps&#39;</span>
<span class="w">    </span><span class="nt">timeStamp</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;s&#39;</span>
<span class="w">    </span><span class="nt">energy</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;eV&#39;</span>
<span class="w">    </span><span class="nt">E</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;eV&#39;</span>
<span class="w">    </span><span class="nt">kx</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1/A&#39;</span>
<span class="w">    </span><span class="nt">ky</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1/A&#39;</span>

<span class="w">  </span><span class="c1"># The channels to load.</span>
<span class="w">  </span><span class="c1"># channels have the following structure:</span>
<span class="w">  </span><span class="c1"># channelAlias:</span>
<span class="w">  </span><span class="c1">#   format: per_pulse/per_electron/per_train</span>
<span class="w">  </span><span class="c1">#   group_name: the hdf5 group path</span>
<span class="w">  </span><span class="c1">#   slice: if the group contains multidimensional data, where to slice</span>

<span class="w">  </span><span class="nt">channels</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># The timestamp</span>
<span class="w">    </span><span class="nt">timeStamp</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_train</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.DIAG/TIMINGINFO/TIME1.BUNCH_FIRST_INDEX.1/&quot;</span>

<span class="w">    </span><span class="c1"># pulse ID is a necessary channel for using the loader.</span>
<span class="w">    </span><span class="nt">pulseId</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_electron</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.EXP/HEXTOF.DAQ/DLD1/&quot;</span>
<span class="w">      </span><span class="nt">slice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">    </span><span class="c1"># detector x position</span>
<span class="w">    </span><span class="nt">dldPosX</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_electron</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.EXP/HEXTOF.DAQ/DLD1/&quot;</span>
<span class="w">      </span><span class="nt">slice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">    </span><span class="c1"># detector y position</span>
<span class="w">    </span><span class="nt">dldPosY</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_electron</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.EXP/HEXTOF.DAQ/DLD1/&quot;</span>
<span class="w">      </span><span class="nt">slice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># Detector time-of-flight channel</span>
<span class="w">    </span><span class="c1"># if split_sector_id_from_dld_time is set to True, This this will generate</span>
<span class="w">    </span><span class="c1"># also the dldSectorID channel</span>
<span class="w">    </span><span class="nt">dldTimeSteps</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_electron</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.EXP/HEXTOF.DAQ/DLD1/&quot;</span>
<span class="w">      </span><span class="nt">slice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">    </span><span class="c1"># The auxiliary channel has a special structure where the group further contains</span>
<span class="w">    </span><span class="c1"># a multidimensional structure so further aliases are defined below</span>
<span class="w">    </span><span class="nt">dldAux</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_pulse</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.EXP/HEXTOF.DAQ/DLD1/&quot;</span>
<span class="w">      </span><span class="nt">slice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">      </span><span class="nt">dldAuxChannels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sampleBias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">tofVoltage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">extractorVoltage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">extractorCurrent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">cryoTemperature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">        </span><span class="nt">sampleTemperature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">        </span><span class="nt">dldTimeBinSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>

<span class="w">    </span><span class="c1"># ADC containing the pulser sign (1: value approx. 35000, 0: 33000)</span>
<span class="w">    </span><span class="nt">pulserSignAdc</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_pulse</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/FL1/Experiment/PG/SIS8300</span><span class="nv"> </span><span class="s">100MHz</span><span class="nv"> </span><span class="s">ADC/CH6/TD/&quot;</span>

<span class="w">    </span><span class="c1"># the energy of the monochromatized beam. This is a quasi-static value.</span>
<span class="w">    </span><span class="c1"># there is a better channel which still needs implementation.</span>
<span class="w">    </span><span class="nt">monochromatorPhotonEnergy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_train</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/FL1/Beamlines/PG/Monochromator/monochromator</span><span class="nv"> </span><span class="s">photon</span><span class="nv"> </span><span class="s">energy/&quot;</span>

<span class="w">    </span><span class="c1"># The GMDs can not be read yet...</span>
<span class="w">    </span><span class="nt">gmdBda</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_train</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/FL1/Photon</span><span class="nv"> </span><span class="s">Diagnostic/GMD/Average</span><span class="nv"> </span><span class="s">energy/energy</span><span class="nv"> </span><span class="s">BDA/&quot;</span>
<span class="w">    </span><span class="c1"># Beam Arrival Monitor, vital for pump-probe experiments as it can compensate sase</span>
<span class="w">    </span><span class="c1"># timing fluctuations.</span>
<span class="w">    </span><span class="c1"># Here we use the DBC2 BAM as the &quot;normal&quot; one is broken.</span>
<span class="w">    </span><span class="nt">bam</span><span class="p">:</span>
<span class="w">        </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_pulse</span>
<span class="w">        </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/uncategorised/FLASH.SDIAG/BAM.DAQ/FL0.DBC2.ARRIVAL_TIME.ABSOLUTE.SA1.COMP/&quot;</span>

<span class="w">    </span><span class="c1"># The delay Stage position, encoding the pump-probe delay</span>
<span class="w">    </span><span class="nt">delayStage</span><span class="p">:</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_train</span>
<span class="w">      </span><span class="nt">group_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/zraw/FLASH.SYNC/LASER.LOCK.EXP/F1.PG.OSC/FMC0.MD22.1.ENCODER_POSITION.RD/dGroup/&quot;</span>

<span class="w">  </span><span class="c1"># The prefixes of the stream names for different DAQ systems for parsing filenames</span>
<span class="w">  </span><span class="c1"># (Not to be changed by user)</span>
<span class="w">  </span><span class="nt">stream_name_prefixes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pbd</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GMD_DATA_gmd_data&quot;</span>
<span class="w">    </span><span class="nt">pbd2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FL2PhotDiag_pbd2_gmd_data&quot;</span>
<span class="w">    </span><span class="nt">fl1user1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FLASH1_USER1_stream_2&quot;</span>
<span class="w">    </span><span class="nt">fl1user2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FLASH1_USER2_stream_2&quot;</span>
<span class="w">    </span><span class="nt">fl1user3</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FLASH1_USER3_stream_2&quot;</span>
<span class="w">    </span><span class="nt">fl2user1</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FLASH2_USER1_stream_2&quot;</span>
<span class="w">    </span><span class="nt">fl2user2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FLASH2_USER2_stream_2&quot;</span>

<span class="w">  </span><span class="c1"># The beamtime directories for different DAQ systems.</span>
<span class="w">  </span><span class="c1"># (Not to be changed by user)</span>
<span class="w">  </span><span class="nt">beamtime_dir</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pg2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/asap3/flash/gpfs/pg2/&quot;</span>

<span class="c1"># metadata collection from scicat</span>
<span class="c1"># metadata:</span>
<span class="c1">#   scicat_url: &lt;URL&gt;</span>
<span class="c1">#   scicat_token: &lt;TOKEN&gt;</span>

<span class="c1"># The nexus collection routine shall be finalized soon for both instruments</span>
<span class="c1"># nexus:</span>
<span class="c1">#   reader: &quot;flash&quot;</span>
<span class="c1">#   definition: &quot;NXmpes&quot;</span>
<span class="c1">#   input_files: [&quot;NXmpes_config_HEXTOF_light.json&quot;]</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="installation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installation</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced_topics.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">&lt;no title&gt;</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#default-configuration-settings">Default configuration settings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-configuration-file-for-mpes-metis-momentum-microscope-at-fhi-berlin">Example configuration file for mpes (METIS momentum microscope at FHI-Berlin)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-configuration-file-for-flash-hextof-momentum-microscope-at-flash-desy">Example configuration file for flash (HEXTOF momentum microscope at FLASH, Desy)</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/user_guide/config.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, OpenCOMPES team.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>